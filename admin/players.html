<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Player Management</title>
    <!-- Add missing CSS link -->
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="container">
        <button onclick="loadPlayers()">Manage Players</button> <!-- Fixed function name -->
        <table>
            <tbody id="player-list"></tbody>
        </table>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            databaseURL: "https://taprace-63f8e-default-rtdb.firebaseio.com"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Corrected function name
        function loadPlayers() {
            db.ref("players").on("value", (snapshot) => {
                const tbody = document.getElementById("player-list");
                tbody.innerHTML = "";

                snapshot.forEach(child => {
                    const player = child.val();
                    tbody.innerHTML += `
                        <tr>
                            <td>${child.key}</td>
                            <td>${player.name}</td>
                            <td>${player.email}</td>
                            <td>${player.totalClicks}</td>
                            <td>${player.rank}</td>
                            <td>${player.walletBalance?.toFixed(3)} ETH</td>
                            <td>${player.registrationDate}</td>
                            <td>${player.banned ? '❌ Banned' : '✅ Active'}</td>
                        </tr>
                    `;
                });
            });
        }
    </script>
</body>
</html>
